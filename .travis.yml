language: c

compiler:
  - gcc

sudo: required

addons:
  apt:
    sources:
    - sourceline: 'ppa:deadsnakes/ppa'
    - sourceline: 'ppa:duggan/bats'
    packages:
    - bats
    - valgrind

    - python2.3
    - python2.4
    - python2.5
    - python2.6
    - python2.7
    
    - python3.3
    - python3.4
    - python3.5
    - python3.6
    - python3.7

before_script:
  autoreconf --install

script:
  ./configure && make && sudo make check

after_failure:
  - cat test-suite.log
